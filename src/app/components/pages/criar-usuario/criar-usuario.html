<div class="login-container">
  <div class="login-card">

    <h2 class="text-center mb-2">Criar Usuário</h2>
    <h5 class="text-center mb-4 text-muted">Preencha seus dados</h5>

    <div *ngIf="mensagemSucesso() != ''" class="alert alert-success alert-dismissible fade show">
      <strong>{{ mensagemSucesso() }}</strong>
      <button type="button" class="btn-close" aria-label="Close" (click)="mensagemSucesso.set('')"></button>
    </div>

    <div *ngIf="mensagemErro() != ''" class="alert alert-danger alert-dismissible fade show">
      <strong>{{ mensagemErro() }}</strong>
      <button type="button" class="btn-close" aria-label="Close" (click)="mensagemErro.set('')"></button>
    </div>

    <form [formGroup]="formCriarUsuario" (ngSubmit)="onSubmit()">

      <!-- Nome -->
      <div class="mb-3">
        <label for="nome" class="form-label">Nome do usuário:</label>
        <input type="text" formControlName="nome" id="nome" class="form-control" placeholder="Digite seu nome" required />
        <div class="text-danger" *ngIf="formCriarUsuario.get('nome')?.touched && formCriarUsuario.get('nome')?.invalid">
          O nome deve ter pelo menos 8 caracteres.
        </div>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <label for="email" class="form-label">Email de acesso:</label>
        <input type="email" formControlName="email" id="email" class="form-control" placeholder="Digite seu email" required />
        <div class="text-danger" *ngIf="formCriarUsuario.get('email')?.touched && formCriarUsuario.get('email')?.invalid">
          Por favor, insira um email válido.
        </div>
      </div>

        <!-- Senha -->
        <div class="mb-3">
        <label for="senha" class="form-label">Senha de acesso:</label>
        <div class="password-wrapper">
          <input
            [type]="mostrarSenha() ? 'text' : 'password'"
            formControlName="senha"
            id="senha"
            class="form-control"
            placeholder="Digite sua senha"
            required
          />
          <i
            class="bi"
            [ngClass]="mostrarSenha() ? 'bi-eye-slash' : 'bi-eye'"
            (click)="mostrarSenha.set(!mostrarSenha())"
          ></i>
      </div>
        <div class="text-danger" *ngIf="formCriarUsuario.get('senha')?.touched && formCriarUsuario.get('senha')?.invalid">
          A senha deve ter pelo menos 8 caracteres.
        </div>
      </div>

      <!-- Confirmar senha -->
      <div class="mb-3">
        <label for="confirmarSenha" class="form-label">Confirme a senha:</label>
        <div class="password-wrapper">
          <input
            [type]="mostrarConfirmarSenha ? 'text' : 'password'"
            formControlName="confirmarSenha"
            id="confirmarSenha"
            class="form-control"
            placeholder="Confirme sua senha"
            required
          />
          <i
            class="bi"
            [ngClass]="mostrarConfirmarSenha ? 'bi-eye-slash' : 'bi-eye'"
            (click)="mostrarConfirmarSenha = !mostrarConfirmarSenha"
          ></i>
        </div>
        <div
          class="text-danger"
          *ngIf="formCriarUsuario.get('confirmarSenha')?.touched && formCriarUsuario.get('confirmarSenha')?.invalid"
        >
          As senhas devem coincidir.
        </div>
      </div>

      <!-- Termos -->
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="termos" formControlName="termos" />
        <label class="form-check-label" for="termos">
          Aceito os
          <a href="#" data-bs-toggle="modal" data-bs-target="#modalTermos">Termos de consentimento</a>
        </label>
        <div class="text-danger" *ngIf="formCriarUsuario.get('termos')?.touched && formCriarUsuario.get('termos')?.invalid">
          Você deve aceitar os termos para continuar.
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100" [disabled]="formCriarUsuario.invalid">
        Criar Usuário
      </button>
    </form>

    <div class="text-center mt-3">
      <a routerLink="/pages/autenticar-usuario" class="text-decoration-none">
        Já possui conta? <strong>Acesse aqui!</strong>
      </a>
    </div>
  </div>
</div>

<!-- Modal Termos -->
<div class="modal fade" id="modalTermos" tabindex="-1" aria-labelledby="modalTermosLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTermosLabel">Termos de Consentimento – Agenda Web</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
       <h6>1. Coleta e uso de dados</h6> 
       <p>Ao utilizar a Agenda Web, você concorda que podemos coletar informações pessoais, como nome, email
        , compromissos e eventos cadastrados, para fornecer os serviços da plataforma de forma personalizada e eficiente.</p>
       <h6>2. Finalidade do tratamento de dados</h6>
       <p>Seus dados serão utilizados exclusivamente para:</p>
       <ul>
        <li>Gerenciar e organizar compromissos e eventos;</li>
        <li>Enviar notificações sobre compromissos cadastrados;</li>
        <li>Melhorar a experiência e funcionalidades da plataforma.</li>
    </ul>
    <h6>3. Compartilhamento de informações</h6>
    <p>Não compartilharemos suas informações pessoais com terceiros, exceto quando exigido por lei ou para proteger direitos legais da Agenda Web.</p>
    <h6>4. Segurança dos dados</h6>
    <p>Adotamos medidas técnicas e administrativas para proteger suas informações contra acesso não autorizado, alteração, divulgação ou destruição.</p>
    <h6>5. Armazenamento e exclusão</h6>
    <p>Seus dados serão armazenados enquanto você utilizar a plataforma. Você pode solicitar a exclusão de suas informações a qualquer momento, entrando em contato com o suporte.</p>
    <h6>6. Consentimento</h6>
    <p>Ao marcar a caixa de aceite dos termos, você declara que leu, entendeu e concorda com o tratamento dos seus dados conforme descrito acima.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>
